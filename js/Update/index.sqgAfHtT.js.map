{"version":3,"file":"index.sqgAfHtT.js","sources":["../../../src/hooks/Loading/index.vue","../../../src/hooks/Loading/loading.ts","../../../src/view/Update/tools.ts","../../../src/view/Update/index.vue"],"sourcesContent":["<template>\n  <div v-if=\"visible\" class=\"loading-overlay\">\n    <div class=\"close-button\" v-show=\"visibleClose\" @click=\"handleClose\" title=\"关闭\"></div>\n    <div class=\"loading-spinner\"></div>\n    <p>{{ message }}</p>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onBeforeUnmount } from 'vue'\n\nconst visible = ref(false)\nconst message = ref('')\nconst visibleClose = ref(false)\nconst timer = ref<any>()\nconst openTime = ref(0)\n\nconst open = (msg: string) => {\n  message.value = msg\n  visible.value = true\n  visibleClose.value = false\n  openTime.value = Date.now()\n\n  timer.value = setTimeout(() => {\n    visibleClose.value = true\n  }, 5000)\n}\n\nconst handleClose = () => {\n  const elapsed = Date.now() - openTime.value\n  const remaining = Math.max(300 - elapsed, 0)\n\n  setTimeout(() => {\n    close()\n  }, remaining)\n}\n\nconst close = () => {\n  clearTimeout(timer.value)\n  visibleClose.value = false\n  visible.value = false\n}\n\nonBeforeUnmount(close)\ndefineExpose({ open, close })\n</script>\n\n<style lang=\"scss\" scoped>\n.loading-overlay {\n  /* 添加滚动锁定 */\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  touch-action: none;\n  background: rgba(255, 255, 255, 0.9);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n\n  /* 阻止事件穿透 */\n  pointer-events: auto;\n\n  p {\n    font-size: 1.2rem;\n    margin-top: 15px;\n    color: #409eff;\n    user-select: none;\n  }\n\n  .loading-spinner {\n    border: 5px solid #f3f3f3;\n    border-top: 5px solid #3498db;\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    animation: spin 1s linear infinite;\n    will-change: transform;\n  }\n\n  .close-button {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    width: 30px;\n    height: 30px;\n    cursor: pointer;\n    z-index: 10000;\n\n    &::before,\n    &::after {\n      content: '';\n      position: absolute;\n      width: 20px;\n      height: 2px;\n      background-color: #3498db;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%) rotate(45deg);\n      transition: all 0.2s;\n    }\n\n    &::after {\n      transform: translate(-50%, -50%) rotate(-45deg);\n    }\n\n    &:hover {\n      &::before,\n      &::after {\n        background-color: #206a9d;\n        width: 22px;\n      }\n    }\n  }\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","// useLoading.ts 优化后\nimport { createApp } from 'vue'\nimport LoadingComponent from './index.vue'\n\ninterface LoadingInstance {\n  open: (msg: string) => void\n  close: () => void\n}\n\nlet loadingInstance: LoadingInstance | null = null\nlet loadingApp: any = null\nlet mountNode: HTMLElement | null = null\nlet openTimestamp = 0\nlet closeTimer: ReturnType<typeof setTimeout> | null = null\n\nconst useLoading = () => {\n  const open = (msg: string = '加载中...') => {\n    // 清除正在等待的关闭操作\n    if (closeTimer) {\n      clearTimeout(closeTimer)\n      closeTimer = null\n    }\n\n    if (!loadingInstance) {\n      mountNode = document.createElement('div')\n      document.body.appendChild(mountNode)\n      loadingApp = createApp(LoadingComponent)\n      loadingInstance = loadingApp.mount(mountNode) as LoadingInstance\n    }\n\n    openTimestamp = Date.now()\n    loadingInstance?.open(msg)\n  }\n\n  const close = () => {\n    if (!loadingInstance) return\n\n    const elapsed = Date.now() - openTimestamp\n    const remainingDelay = Math.max(300 - elapsed, 0)\n\n    closeTimer = setTimeout(() => {\n      loadingInstance!.close()\n      // 销毁实例\n      loadingApp?.unmount()\n      if (mountNode && document.body.contains(mountNode)) {\n        document.body.removeChild(mountNode)\n      }\n      loadingApp = null\n      loadingInstance = null\n      mountNode = null\n      closeTimer = null\n    }, remainingDelay)\n  }\n\n  return { open, close }\n}\n\nexport default useLoading\n","import useLoading from '@/hooks/Loading/loading'\n\nexport interface IOptions {\n  value: string\n  label: string\n  plugin?: string\n}\nexport interface IVersion {\n  [key: string]: {\n    version: string\n    plugin: string\n  }[]\n}\n\nconst { open, close } = useLoading()\n\nexport const baseUrl = 'http://k-rpa-lite.kingsware.cn:48080'\nexport const standbyUrlList = ['https://k-rpa-lite.donxj.com']\n\n/** 超时时间 */\nconst timeoutDuration = 15000\n/**  默认使用第一个 baseUr */\nlet lastCheckedBaseUrl = baseUrl //\n/** 上次检查的时间戳, 初始化为0，强制首次检查 */\nlet lastCheckedTime = 0\n/** 缓存有效期（10分钟） */\nconst CACHE_DURATION = 10 * 60 * 1000\n/** 用于并发控制的检查锁 */\nlet checkingPromise: Promise<string> | null = null //\n\n// 自定义错误类型\nclass NetworkError extends Error {\n  constructor(message: string) {\n    super(message)\n    this.name = 'NetworkError'\n  }\n}\n\nclass HttpError extends Error {\n  statusCode: number\n\n  constructor(statusCode: number, message: string) {\n    super(message)\n    this.name = 'HttpError'\n    this.statusCode = statusCode\n  }\n}\n\nclass TimeoutError extends Error {\n  constructor() {\n    super('Request timeout')\n    this.name = 'TimeoutError'\n  }\n}\n\n/** 获取全部候选地址列表 */\nfunction getAllUrls(): string[] {\n  return [baseUrl, ...standbyUrlList]\n}\n\n// 专用健康检查方法（带超时）\nconst checkUrlAvailability = async (url: string): Promise<boolean> => {\n  const controller = new AbortController()\n  const timeoutId = setTimeout(() => controller.abort(), 5000)\n  try {\n    const response = await fetch(`${url}/config.json`, {\n      method: 'HEAD',\n      signal: controller.signal,\n      cache: 'no-cache'\n    })\n    return response.ok\n  } catch {\n    return false\n  } finally {\n    clearTimeout(timeoutId)\n  }\n}\n\n// 顺序检查地址可用性\nconst findAvailableUrl = async (): Promise<string> => {\n  // 优先检查主地址\n  if (await checkUrlAvailability(baseUrl)) {\n    return baseUrl\n  }\n\n  // 顺序检查备用地址\n  for (const url of standbyUrlList) {\n    if (await checkUrlAvailability(url)) {\n      return url\n    }\n  }\n\n  throw new NetworkError('请求地址不可用')\n}\n\n/**\n * 获取当前可用的 baseUrl\n * @returns {Promise<string>}\n */\nasync function getAvailableBaseUrl(): Promise<string> {\n  const shouldCheck = Date.now() - lastCheckedTime > CACHE_DURATION || !lastCheckedBaseUrl\n  // 使用缓存结果\n  if (!shouldCheck) {\n    return lastCheckedBaseUrl\n  }\n  // 处理并发请求\n  if (!checkingPromise) {\n    checkingPromise = (async () => {\n      try {\n        const availableUrl = await findAvailableUrl()\n        lastCheckedBaseUrl = availableUrl\n        lastCheckedTime = Date.now()\n        return availableUrl\n      } finally {\n        checkingPromise = null\n      }\n    })()\n  }\n  return checkingPromise\n}\n\n/**\n * 发起 API 请求\n * @param {string} url 相对于基础 URL 的路径\n * @param {'json'|'text'|'blob'} format 响应体的解析格式，默认为 'json'\n * @param {number} retries 默认重试次数\n * @returns {Promise<Object>} 返回一个 Promise 对象，该对象解析为从 API 获取的数据\n * @throws {Error} 如果请求失败或响应不是有效的格式，则抛出错误\n */\nexport const ajaxAPI = async <T = any>(url: string, format = 'json', retries = 2): Promise<T> => {\n  const controller = new AbortController()\n  const timeoutId = setTimeout(() => controller.abort(), timeoutDuration)\n\n  try {\n    const currentBaseUrl = await getAvailableBaseUrl()\n    const fullUrl = `${currentBaseUrl}${url}`\n\n    const response: any = await fetch(fullUrl, {\n      signal: controller.signal,\n      cache: 'no-cache'\n    })\n    clearTimeout(timeoutId)\n    if (!response.ok) {\n      throw new HttpError(response.status, `请求失败，状态码：${response.status}`)\n    }\n\n    return await response[format]()\n  } catch (error: any) {\n    clearTimeout(timeoutId)\n    // 处理重试逻辑\n    if (retries > 0) {\n      const urls = getAllUrls()\n      const currentIndex = urls.indexOf(lastCheckedBaseUrl)\n      const nextIndex = currentIndex >= 0 ? (currentIndex + 1) % urls.length : 0\n      lastCheckedBaseUrl = urls[nextIndex]\n      return ajaxAPI<T>(url, format, retries - 1)\n    }\n    // 错误类型处理\n    if (error instanceof HttpError) throw error\n    if (error.name === 'AbortError') throw new TimeoutError()\n    throw new NetworkError(`网络请求失败: ${error.message}`)\n  }\n}\n\n/**\n * 获取系统版本对象\n * @returns\n */\nexport const getVersionListAPI = async () => {\n  return await ajaxAPI('/config.json?t=' + Date.now())\n}\n\n/**\n * 获取更新日志\n * @param url\n * @returns\n */\nexport const getUpdateLogAPI = async (url: string) => {\n  return await ajaxAPI(url, 'text')\n}\n\n/** 下载文件 */\nexport const downServerFile = async (url: string, name: string = '', retries = 1): Promise<void> => {\n  try {\n    open()\n    const currentBaseUrl = await getAvailableBaseUrl()\n    const fullUrl = `${currentBaseUrl}${url}`\n\n    const response = await fetch(fullUrl)\n    if (!response.ok) {\n      throw new HttpError(response.status, '文件下载失败')\n    }\n\n    const blob = await response.blob()\n    await downloadBlob(blob, `K-RPA Lite${name}`)\n  } catch (error) {\n    if (retries > 0) {\n      lastCheckedTime = 0 // 强制刷新缓存\n      return downServerFile(url, name, retries - 1)\n    }\n    throw error\n  } finally {\n    close()\n  }\n}\n/**\n * 创建下载文件，解决浏览器直接打开文件的问题\n * @param blob\n * @param fileName\n */\nasync function downloadBlob(blob: Blob, fileName: string = '下载文件') {\n  try {\n    const { showSaveFilePicker }: any = window\n    if (showSaveFilePicker) {\n      const handle = await showSaveFilePicker({\n        types: [\n          {\n            description: 'All Files', // 描述可以自定义\n            accept: { '*/*': [] } // 使用通配符表示所有文件类型\n          }\n        ],\n        suggestedName: fileName // 建议的文件名\n      })\n      const writableStream = await handle.createWritable()\n      await writableStream.write(await blob.arrayBuffer())\n      await writableStream.close()\n    } else {\n      const href = window.URL.createObjectURL(blob) //创建下载的链接\n      const downloadElement = document.createElement('a')\n      downloadElement.href = href\n      downloadElement.target = '_blank'\n      downloadElement.download = fileName\n      document.body.appendChild(downloadElement)\n      downloadElement.click() // 点击下载\n      document.body.removeChild(downloadElement) // 下载完成移除元素\n      window.URL.revokeObjectURL(href) // 释放掉blob对象\n    }\n  } catch (e) {\n    console.error('文件保存失败:', e)\n  }\n}\n\n// 定义一个函数来比较两个版本号\nfunction compareVersions(v1: string, v2: string) {\n  const parts1 = v1.split('.').map(Number)\n  const parts2 = v2.split('.').map(Number)\n\n  const longestLength = Math.max(parts1.length, parts2.length)\n\n  for (let i = 0; i < longestLength; i++) {\n    const num1 = i < parts1.length ? parts1[i] : 0\n    const num2 = i < parts2.length ? parts2[i] : 0\n\n    if (num1 > num2) return 1\n    if (num1 < num2) return -1\n  }\n\n  return 0\n}\n\n// 定义一个函数来找到最新版本的对象\n\n/**\n * @param items 传入对象数组\n * @param key 比较的版本key值\n */\nexport function findLatestVersion(items: any[], key: string) {\n  if (!items || items.length === 0) {\n    return {}\n  }\n\n  let latestItem = items[0]\n  for (let i = 1; i < items.length; i++) {\n    if (compareVersions(items[i][key], latestItem[key]) > 0) {\n      latestItem = items[i]\n    }\n  }\n  return latestItem\n}\n","<script setup lang=\"ts\">\nimport DOMPurify from 'dompurify'\nimport { marked } from 'marked'\nimport { computed, nextTick, onMounted, ref, watch } from 'vue'\nimport { downServerFile, findLatestVersion, getUpdateLogAPI, getVersionListAPI, IOptions, IVersion } from './tools'\n\nconst system = ref('')\nconst version = ref('')\nconst pluginValue = ref<string>()\n/** 系统选项 */\nconst systemOptions = ref<IOptions[]>([])\n/** 版本选项 */\nconst versionOptions = ref<IOptions[]>([])\n/** 系统版本对象 */\nconst versionObject = ref<IVersion>({})\nconst markdownContent = ref<string>('')\n\n// 初始化时设置默认版本\nconst initData = async () => {\n  versionObject.value = (await getVersionListAPI()) as any\n  const systemKeys = Object.keys(versionObject.value)\n  if (systemKeys.length === 0) return\n  systemOptions.value = systemKeys.map((item) => {\n    return { value: item, label: item }\n  })\n  system.value = systemKeys[0]\n}\n/** 获取日志 */\nconst getLog = async () => {\n  await nextTick()\n  const logData = await getUpdateLogAPI(`/${system.value}/${version.value}/changeLog.md`)\n  const htmlContent = await marked.parse(logData)\n  const cleanHtml = DOMPurify.sanitize(htmlContent)\n  markdownContent.value = cleanHtml\n}\n\nonMounted(async () => {\n  initData()\n})\n\nconst isAllowDown = computed(() => {\n  return !!(system.value && version.value)\n})\n\nconst downloadRPA = () => {\n  if (!isAllowDown) return\n  const fullPath = '/' + system.value + '/' + version.value + '/K-RPA Lite.zip'\n  downServerFile(fullPath, version.value + '.zip')\n}\nconst downloadPlugin = () => {\n  if (!isAllowDown) return\n  const fullPath = '/plugin/' + pluginValue.value + '.zip'\n  downServerFile(fullPath, pluginValue.value + '.zip')\n}\n\nconst changeSystem = (key: string) => {\n  const systemKeys = Object.keys(versionObject.value)\n  if (systemKeys.length === 0) return\n  const arr: { version: string; plugin: string }[] = []\n  for (let item in versionObject.value) {\n    if (item === key) {\n      arr.push(...(versionObject.value[item] as any[]))\n      break\n    }\n  }\n  versionOptions.value = arr.map((item) => {\n    return { value: item.version, label: item.version, plugin: item.plugin }\n  })\n  const maxVersion = findLatestVersion(versionOptions.value, 'value')\n  const { plugin, value } = maxVersion\n  version.value = value\n  pluginValue.value = plugin\n  getLog()\n}\n\nconst changeVersion = (v: string) => {\n  const systemList = versionObject.value[system.value]\n  const findItem = systemList?.find((item) => item.version === v)\n  if (!findItem) return\n  version.value = findItem.version\n  pluginValue.value = findItem.plugin\n  getLog()\n}\n\nwatch(\n  system,\n  (key) => {\n    if (!key) return\n    changeSystem(key)\n  },\n  {\n    once: true\n  }\n)\n</script>\n\n<template>\n  <div class=\"update-about\">\n    <div class=\"main\">\n      <div class=\"box\">\n        <div class=\"title\">下载 K-RPA Lite®</div>\n        <div class=\"version\">\n          <div class=\"text\">获取 K-RPA Lite®</div>\n          <div class=\"select\">\n            <el-select v-model=\"system\" placeholder=\"系统\" style=\"width: 100%\" @change=\"changeSystem\">\n              <el-option v-for=\"item in systemOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\n              <template #empty>暂无系统</template>\n            </el-select>\n          </div>\n          <div class=\"text\">环境中的</div>\n          <div class=\"select\">\n            <el-select v-model=\"version\" placeholder=\"版本\" style=\"width: 100%\" @change=\"changeVersion\">\n              <el-option v-for=\"item in versionOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\n              <template #empty>先选系统系统</template>\n            </el-select>\n          </div>\n          <div class=\"text\">版本。</div>\n        </div>\n        <div class=\"remark\">\n          <el-scrollbar height=\"100%\">\n            <div class=\"content\" v-html=\"markdownContent\"></div>\n          </el-scrollbar>\n        </div>\n        <el-button :disabled=\"!isAllowDown\" type=\"primary\" class=\"btn\" @click=\"downloadRPA\">\n          下载 K-RPA Lite 至本地\n        </el-button>\n        <el-button :disabled=\"!isAllowDown\" type=\"primary\" class=\"btn\" @click=\"downloadPlugin\">下载插件</el-button>\n      </div>\n    </div>\n    <div class=\"footer\">\n      <div class=\"left\">\n        <p>版权所有：©2025 金智维</p>\n        <p>粤ICP备16115221号-1</p>\n      </div>\n      <div class=\"right\">\n        <div class=\"policy\">商业策略</div>\n        <div class=\"line\"></div>\n        <div class=\"policy\">隐私策略</div>\n        <div class=\"line\"></div>\n        <div class=\"policy\">安全政策</div>\n        <div class=\"line\"></div>\n        <div class=\"bgcImg\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.update-about {\n  --primary-color: #4a90e2;\n  --secondary-color: #adb5bd;\n  --background-color: #343a40;\n  --text-color: #e9ecef;\n}\n[data-theme='la'] {\n  --primary-color: #4a90e2;\n  --secondary-color: #adb5bd;\n  --background-color: #343a40;\n  --text-color: #e9ecef;\n}\n.update-about {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: var(--background-color);\n  .main {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    .box {\n      width: 960px;\n      .title {\n        font-size: 32px;\n        font-weight: bold;\n        line-height: normal;\n        letter-spacing: 0em;\n        color: #ffffff;\n        margin-bottom: 16px;\n      }\n      .version {\n        display: flex;\n        align-items: center;\n        justify-content: start;\n        gap: 8px;\n        margin-bottom: 12px;\n        color: #ffffff;\n        .text {\n          font-size: 14px;\n          font-weight: normal;\n          line-height: normal;\n          letter-spacing: 0em;\n          color: #ffffff;\n        }\n        .select {\n          width: 168px;\n          height: 32px;\n          border-radius: 6px;\n          background: #38363c;\n\n          box-sizing: border-box;\n          /* --k-gray-400 */\n          border: 1px solid #736f78;\n          // background-color: red;\n        }\n      }\n      .remark {\n        display: flex;\n        flex-direction: column;\n        padding: 12px;\n        gap: 12px;\n        background: #0e121b;\n        box-sizing: border-box;\n        border: 1px solid #38363c;\n        width: 960px;\n        height: 420px;\n        border-radius: 4px;\n        overflow: hidden;\n        .content {\n          color: #ffffff;\n        }\n        .mark-title {\n          font-size: 18px;\n          font-weight: bold;\n          line-height: normal;\n          letter-spacing: 0em;\n          font-feature-settings: 'kern' on;\n          color: #ffffff;\n        }\n        .li-box {\n          margin-top: 12px;\n          color: #ffffff;\n          ol,\n          li {\n            list-style: none; /* 移除列表项标记 */\n            padding: 0;\n            margin: 0;\n          }\n          li {\n            padding: 2px;\n          }\n        }\n      }\n      .btn {\n        margin-top: 12px;\n        font-size: 14px;\n        font-weight: normal;\n        line-height: 20px;\n        letter-spacing: 0em;\n        color: #ffffff;\n      }\n    }\n  }\n  .footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    box-sizing: border-box;\n    padding: 14px 48px;\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    width: 100%;\n    height: 48px;\n    .left {\n      display: flex;\n      justify-content: start;\n      gap: 24px;\n      p {\n        font-size: 12px;\n        font-weight: normal;\n        line-height: 16px;\n        letter-spacing: 0em;\n        color: #9e9e9e;\n      }\n    }\n    .right {\n      display: flex;\n      justify-content: start;\n      align-items: center;\n      gap: 24px;\n      .policy {\n        font-size: 12px;\n        font-weight: normal;\n        line-height: 16px;\n        letter-spacing: 0em;\n        color: #9e9e9e;\n        cursor: pointer;\n      }\n      .line {\n        width: 1px;\n        height: 12px;\n        background-color: #9e9e9e;\n      }\n      .bgcImg {\n        width: 64px;\n        height: 16px;\n        background-image: url('./imgs//ksware.png'); /* 设置背景图片的路径 */\n        background-size: cover; /* 背景图片根据容器大小自动调整 */\n        background-position: center; /* 图片居中显示 */\n      }\n    }\n  }\n}\n</style>\n"],"names":["visible","ref","message","visibleClose","timer","openTime","open","msg","handleClose","elapsed","remaining","close","onBeforeUnmount","__expose","loadingInstance","loadingApp","mountNode","openTimestamp","closeTimer","useLoading","createApp","LoadingComponent","remainingDelay","baseUrl","standbyUrlList","timeoutDuration","lastCheckedBaseUrl","lastCheckedTime","CACHE_DURATION","checkingPromise","NetworkError","HttpError","statusCode","TimeoutError","getAllUrls","checkUrlAvailability","url","controller","timeoutId","findAvailableUrl","getAvailableBaseUrl","availableUrl","ajaxAPI","format","retries","fullUrl","response","error","urls","currentIndex","nextIndex","getVersionListAPI","getUpdateLogAPI","downServerFile","name","blob","downloadBlob","fileName","showSaveFilePicker","writableStream","href","downloadElement","compareVersions","v1","v2","parts1","parts2","longestLength","i","num1","num2","findLatestVersion","items","key","latestItem","system","version","pluginValue","systemOptions","versionOptions","versionObject","markdownContent","initData","systemKeys","item","getLog","nextTick","logData","htmlContent","marked","cleanHtml","DOMPurify","onMounted","isAllowDown","computed","downloadRPA","fullPath","downloadPlugin","changeSystem","arr","maxVersion","plugin","value","changeVersion","v","findItem","watch"],"mappings":"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"}