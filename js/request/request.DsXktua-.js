import{a as p}from"../axios/axios.DW_MHI2K.js";import{r as u}from"../../index.1V_XBf00.js";import{E as s}from"../element-plus/element-plus.CJ7pwcEu.js";const m="SYH",o=m+"_YYY_TOKEN",g="YYY_STORAGE",y=()=>sessionStorage.getItem(o)||"",T=e=>sessionStorage.setItem(o,e),l=()=>sessionStorage.removeItem(o),b=e=>{const r=c(e),t=localStorage.getItem(r)||"1";return parseInt(t,10)},f=(e,r)=>{const t=c(e);localStorage.setItem(t,r)};function c(e){return g+"__"+e}const a=p.create({baseURL:"/api/api",timeout:1e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{const r=y();return r&&(e.headers.Authorization=`Bearer ${r}`),e},e=>Promise.reject(e));a.interceptors.response.use(e=>e.data,e=>{if(console.error("Error:",e),e.response){const{status:r}=e.response,{message:t}=e.response.data||"未知错误";E(r,t)}else e.request?(console.error("Request Error:",e.request),s({message:"请求超时或网络异常，请稍后再试。",type:"error"})):(console.error("Error Message:",e.message),s({message:"发生了一个错误，请联系管理员。",type:"error"}));return Promise.reject(e)});function E(e,r){switch(e){case 401:s({message:"登录已失效，请重新登录！",type:"error"}),u.replace({name:"Login"}),l();break;case 403:s({message:r||"您没有权限访问该资源。",type:"error"});break;case 404:s({message:r||"请求的资源未找到。",type:"error"});break;case 500:s({message:r||"服务器内部错误。",type:"error"});break;case 502:s({message:r||"网关错误。",type:"error"});break;case 503:s({message:r||"服务不可用，请稍后再试。",type:"error"});break;case 504:s({message:r||"网关超时。",type:"error"});break;default:s({message:r||"发生了一个未知错误。",type:"error"});break}}async function Y(e,r,t={},i={}){try{return await a({url:e,method:r,data:r==="GET"?void 0:t,params:r==="GET"?t:void 0,...i})}catch(n){return Promise.reject(n)}}export{f as a,b as g,Y as r,T as s};
//# sourceMappingURL=request.DsXktua-.js.map
